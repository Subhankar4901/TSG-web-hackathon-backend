(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{837:function(e,t,a){"use strict";var n=a(73),r=a.n(n),i=(a(31),a(32)),c="[Complaints] GET complaint",o="[Complaints] SAVE complaint",l="[Complaints] ADD remark";function s(e){var t=r.a.get("/api/complaints/getcomplaint/".concat(e));return function(e){return t.then(function(t){return e({type:c,payload:t.data.complain})})}}function m(e){var t=new FormData;for(var a in e)t.append(a,e[a]);t.append("attachment",e.attachment);var n=fetch("/api/complaints/addcomplaint",{method:"POST",body:t,credentials:"include"});return function(e){return n.then(function(t){return e(Object(i.B)({message:"complaint Saved"})),e({type:o,payload:t.data})})}}function u(e,t){var a=fetch("/api/complaints/addRemark",{crossDomain:!0,method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({complain_id:e,remark:t})});return function(e){return a.then(function(t){return e(Object(i.B)({message:"Remark updated"})),e({type:l,payload:t.data})})}}function d(){return{type:c,payload:{description:"",active:!0}}}var p=a(104),f=a.n(p),h=a(164),b="[COMPLAINTS] GET ORDERS",g="[COMPLAINTS] SET COMPLAINTS SEARCH TEXT";function y(e){var t=fetch("api/complaints/getcomplaints/",{crossDomain:!0,method:"GET",credentials:"include"});return function(e){return t.then(function(){var t=Object(h.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:return n=t.sent,e(Object(i.B)({message:n.message})),t.abrupt("return",e({type:b,payload:n.complaints}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}function v(e){return{type:g,searchText:e.target.value}}a.d(t,"c",function(){return c}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"h",function(){return s}),a.d(t,"j",function(){return m}),a.d(t,"f",function(){return u}),a.d(t,"i",function(){return d}),a.d(t,"b",function(){return b}),a.d(t,"e",function(){return g}),a.d(t,"g",function(){return y}),a.d(t,"k",function(){return v})},858:function(e,t,a){"use strict";var n=a(49),r=a(7),i=a(837),c={data:null},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.c:case i.d:case i.a:return Object(r.a)({},e,{data:t.payload});default:return e}},l={data:[],searchText:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.b:return Object(r.a)({},e,{data:t.payload});case i.e:return Object(r.a)({},e,{searchText:t.searchText});default:return e}},m=Object(n.d)({complaint:o,complaints:s});t.a=m},971:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(14),i=a(0),c=a.n(i),o=a(119),l=a(804),s=a(826),m=a(830),u=a(818),d=a(821),p=a(340),f=a(829),h=a(31),b=a(120),g=a(24),y=(a(3),a(9)),v=a(5),w=a(291),j=a(837),E=a(858),O=a(103),x=a.n(O),I=Object(f.a)(function(e){return{complaintImageFeaturedStar:{position:"absolute",top:0,right:0,color:p.a[400],opacity:0},complaintImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},complaintImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $complaintImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $complaintImageFeaturedStar":{opacity:1},"&:hover $complaintImageFeaturedStar":{opacity:1}}}}});t.default=Object(w.a)("user",E.a)(function(e){var t=Object(v.b)(),a=Object(v.c)(function(e){return e.user.complaint}),p=Object(v.c)(function(e){return e.auth.user}),f=Object(i.useState)("new"),w=Object(r.a)(f,2),E=w[0],O=w[1],N=(I(e),Object(i.useState)(0)),S=Object(r.a)(N,2),C=S[0],T=S[1],k=Object(b.b)(null),D=k.form,P=k.handleChange,R=k.setForm,A=Object(i.useState)(null),F=Object(r.a)(A,2);function _(){return D.subject&&D.subject.length>0&&D.description&&D.description.length>0&&!y.a.isEqual(a.data,D)}return F[0],F[1],Object(i.useEffect)(function(){!function(){var a=e.match.params.Id;O(a),console.log(E),"new"===a?t(j.i(),a):t(j.h(a))}()},[t,e.match.params]),Object(i.useEffect)(function(){a.data&&(R(a.data),console.log(a.data))},[a.data]),c.a.createElement(h.n,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:D&&c.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},c.a.createElement("div",{className:"flex flex-col items-start max-w-full"},c.a.createElement(h.b,{animation:"transition.slideRightIn",delay:300},c.a.createElement(o.a,{className:"normal-case flex items-center sm:mb-12",component:g.a,role:"button",to:"/profile/complaints",color:"inherit"},c.a.createElement(l.a,{className:"mr-4 text-20"},"arrow_back"),"complaints")),c.a.createElement("div",{className:"flex items-center max-w-full"},c.a.createElement(h.b,{animation:"transition.expandIn",delay:300},c.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:D.name})),c.a.createElement("div",{className:"flex flex-col min-w-0"},c.a.createElement(h.b,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(o.a,{className:"text-16 sm:text-20 truncate"},D.subject?D.subject:"New complaint")),c.a.createElement(h.b,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(o.a,{variant:"caption"},"Complaint Detail"))))),"new"==E?c.a.createElement(h.b,{animation:"transition.slideRightIn",delay:300},c.a.createElement(s.a,{className:"whitespace-no-wrap",variant:"contained",disabled:!_(),onClick:function(){return t(j.j(D))}},"Submit")):("admin"==p.role||"tsg_offical"==p.role)&&c.a.createElement(h.b,{animation:"transition.slideRightIn",delay:300},c.a.createElement(s.a,{className:"whitespace-no-wrap",variant:"contained",disabled:!_(),onClick:function(){return t(j.f(E,D.remark))}},"Update Remark"))),contentToolbar:c.a.createElement(m.a,{value:C,onChange:function(e,t){T(t)},indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},c.a.createElement(u.a,{className:"h-64 normal-case",label:"Details"})),content:D&&c.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},0===C&&c.a.createElement("div",{id:"complaint-form"},"new"!=E&&c.a.createElement(d.a,{className:"mt-8 mb-16",id:"date",name:"date",onChange:P,label:"Date",type:"text",value:"".concat(new Date(D.date).toDateString()," ").concat(x()(D.date).format("HH:mm:ss")),multiline:!0,rows:1,InputProps:{readOnly:"new"!=E},variant:"outlined",fullWidth:!0}),c.a.createElement(d.a,{className:"mt-8 mb-16",id:"subject",name:"subject",onChange:P,label:"Subject",type:"text",value:D.subject?D.subject:"",multiline:!0,rows:1,InputProps:{readOnly:"new"!=E},variant:"outlined",error:!(D.subject&&D.subject.length>0&&D.subject.length<=50),helperText:D.subject&&D.subject.length>0?D.subject.length<=50?"":"Max 50 characters allowed":"Subject cannot be empty",fullWidth:!0}),c.a.createElement(d.a,{className:"mt-8 mb-16",id:"description",name:"description",onChange:P,label:"Description",type:"text",value:D.description,multiline:!0,rows:3,InputProps:{readOnly:"new"!=E},error:!(D.description&&D.description.length>0),helperText:D.description&&D.description.length>0?"":"Description cannot be empty",variant:"outlined",fullWidth:!0}),"new"!=E&&c.a.createElement(d.a,{className:"mt-8 mb-24",id:"made_by",name:"Made By",onChange:P,label:"Made By",type:"text",value:D.made_by,multiline:!0,rows:1,InputProps:{readOnly:"new"!=E},variant:"outlined",fullWidth:!0}),"new"!=E&&c.a.createElement(d.a,{className:"mt-8 mb-24",id:"remark",name:"remark",onChange:P,label:"Remark",type:"text",value:D.remark,multiline:!0,rows:1,InputProps:{readOnly:"admin"!=p.role&&"tsg_official"!=p.role},variant:"outlined",fullWidth:!0}),"new"==E?c.a.createElement(h.y,{label:"Attachment"},c.a.createElement("input",{id:"attachment",type:"file",name:"attachment",onChange:function(e){var t=e.target.files[0];t&&R(y.a.set(Object(n.a)({},D),"attachment",t))}})):D.attachment&&c.a.createElement(h.y,{label:"Attachment"},c.a.createElement(s.a,{variant:"contained",href:D.attachment,target:"_blank",className:"bg-indigo-darker hover:bg-indigo text-white text-lg",onClick:function(){return console.log(D.attachment)}},"Download"))))})})}}]);