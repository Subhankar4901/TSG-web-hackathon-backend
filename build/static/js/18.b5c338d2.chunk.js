(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{983:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(0),c=a.n(r),l=a(831),i=a(758),o=a(804),s=a(119),m=a(146),d=a(985),u=a(963),p=a(982),E=a(31),f=a(5),v=a(291),b=a(879),h=a.n(b),g=a(338),N=a(24),x=a(49),w=a(7),y=a(104),j=a.n(y),O=a(164),S=a(73),k=a.n(S),_=a(32),T="[EVENTS] GET_EVENT_INFO",C="[EVENTS] SAVE_REPORT",P="[EVENTS] GET ACHIEVEMENTS";var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:case C:case P:return Object(w.a)({},e,t.payload);default:return e}},V=Object(x.d)({event:R}),D=a(829),H=a(103),A=a.n(H),J=(a(63),a(826)),B=a(26),F=Object(D.a)(function(e){return{stepLabel:{cursor:"pointer!important"},successFab:{background:g.a[500]+"!important",color:"white!important"}}});t.default=Object(v.a)("Events",V)(function(e){var t=Object(f.b)(),a=Object(f.c)(function(e){return e.Events.event}),v=Object(r.useState)(null),b=Object(n.a)(v,2),g=b[0],x=b[1],w=Object(f.c)(function(e){return e.auth.user}),y=["poster","introduction","procedure","jugde_criteria","timeline","venue","Posted By","report","results"],S=F(e),R=Object(r.useRef)(null);Object(r.useEffect)(function(){var a=e.match.params.event_id;t(function(e){var t=k.a.get("/api/events/"+e+"/info");return function(e){return t.then(function(t){return console.log(t.data.timeline),t.data.timeline=JSON.parse(t.data.timeline),e({type:T,payload:t.data})})}}(a)),t(function(e){var t=k.a.get("/api/events/".concat(e,"/getAchievements"),{withCredentials:!0});return function(e){return t.then(function(t){console.log(t),e({type:P,payload:t.data})})}}(a))},[t,e.match.params]);var V="text-3xl font-bold text-indigo-light",D="text-xl mb-10 font-semibold text-white";return c.a.createElement(E.o,{classes:{content:"flex flex-col flex-auto overflow-hidden",header:"h-100 min-h-100 fixed z-10"},header:c.a.createElement("div",{className:"flex flex-1 items-center px-16 lg:px-24"},c.a.createElement(l.a,{lgUp:!0},c.a.createElement(i.a,{onClick:function(e){return R.current.toggleLeftSidebar()},"aria-label":"open left sidebar"},c.a.createElement(o.a,null,"menu"))),c.a.createElement(i.a,{className:"mr-16",to:e.location.state&&e.location.state.prevPath?e.location.state.prevPath:"/",component:N.a},c.a.createElement(o.a,null,"arrow_back")),a&&c.a.createElement("div",null,c.a.createElement(s.a,{className:"flex-1 text-3xl"},a.title),c.a.createElement(s.a,{className:"text-center text-13 font-600 mt-4",color:"textSecondary"},"Start - ",new Date(a.start).toDateString(),", ",A()(a.start).format("HH:mm:ss")),c.a.createElement(s.a,{className:"text-center text-13 font-600 mt-4",color:"textSecondary"},"End   - ",new Date(a.end).toDateString(),", ",A()(a.end).format("HH:mm:ss")))),content:a&&c.a.createElement("div",{className:"flex flex-1 relative overflow-hidden"},c.a.createElement(E.p,{className:"w-full overflow-auto"},c.a.createElement(h.a,{className:"overflow-hidden",index:0,enableMouseEvents:!0},c.a.createElement("div",{className:"flex justify-center p-10 pb-64 sm:pb-64 md:pb-64"},c.a.createElement(m.a,{className:"w-full max-w-lg rounded-8 p-16 md:p-24",elevation:1},a.poster&&c.a.createElement("div",{className:"pb-20 "},c.a.createElement("img",{className:"rounded-8 object-fill mx-auto",src:a.poster})),c.a.createElement("div",{className:"mb-5"},c.a.createElement(s.a,{className:V},"Introduction"),c.a.createElement(s.a,{className:D,id:"introduction"},a.introduction)),c.a.createElement("div",{className:"mb-5"},c.a.createElement(s.a,{className:V},"Procedure"),c.a.createElement(s.a,{className:D,id:"procedure"},a.procedure)),c.a.createElement("div",{className:"mb-5"},c.a.createElement(s.a,{className:V},"Jugde Criteria"),c.a.createElement(s.a,{className:D,id:"jugde_criteria"},a.jugde_criteria)),c.a.createElement("div",{className:"mb-5"},c.a.createElement(s.a,{className:V},"Timeline"),c.a.createElement("ul",null,a.timeline&&a.timeline.map(function(e){return c.a.createElement("li",{className:"text-xl mb-2 font-semibold text-white",key:e},e)}))),c.a.createElement("div",{className:"mb-5"},c.a.createElement(s.a,{className:V},"Venue"),c.a.createElement(s.a,{className:D,id:"venue"},a.venue)),c.a.createElement("div",{className:"mb-5"},c.a.createElement(s.a,{className:V},"Posted By"),c.a.createElement(s.a,{className:D,id:"organiser"},a.organiser)),c.a.createElement("div",{className:"relative -bottom-20"},B.b.organisers.includes(w.role)&&c.a.createElement(E.y,{label:"Update Report"},c.a.createElement("input",{id:"attachment",type:"file",name:"attachment",onChange:function(e){var t=e.target.files[0];x(t)}}),c.a.createElement(J.a,{onClick:function(){var a=e.match.params.event_id;t(function(e,t){var a=new FormData;a.append("report",e);var n=fetch("/api/events/report/".concat(t,"/save-report"),{method:"POST",body:a,credentials:"include"});return function(e){return n.then(function(){var t=Object(O.a)(j.a.mark(function t(a){var n;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:return n=t.sent,e(Object(_.B)({message:n.message})),t.abrupt("return",e({type:C,payload:n}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}(g,a))},disabled:!g},"update")),a.report&&c.a.createElement(J.a,{variant:"contained",href:a.report,target:"_blank",className:"bg-indigo-darker hover:bg-indigo text-white text-lg float-right"},"Download Report"),c.a.createElement("div",{className:"mb-5",id:"Results"},c.a.createElement(s.a,{className:V},"Results"),c.a.createElement("ul",null,a.achievements&&a.achievements.map(function(e){return c.a.createElement("li",{className:"text-xl mb-2 font-semibold text-white",key:e.id},e.winner_name," got position ",e.position)}))),B.b.organisers.includes(w.role)&&c.a.createElement(N.a,{to:{pathname:"/add-achievement/".concat(e.match.params.event_id,"/").concat(e.match.params.eventTitle),state:{prevPath:window.location.pathname}}},c.a.createElement(J.a,{variant:"contained",className:"bg-indigo-darker hover:bg-indigo text-white text-lg -translate-y-20 float-right"},"Add achievement")))))))),leftSidebarContent:a&&c.a.createElement(d.a,{classes:{root:"bg-transparent"},activeStep:y.length,orientation:"vertical",style:{position:"fixed"}},y.map(function(e){return c.a.createElement(u.a,{key:e},c.a.createElement(p.a,{classes:{root:S.stepLabel}},e.split("_").join(" ").toUpperCase()))})),innerScroll:!0,ref:R})})}}]);