(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{837:function(e,t,a){"use strict";var n=a(73),r=a.n(n),c=(a(31),a(32)),i="[Complaints] GET complaint",o="[Complaints] SAVE complaint",l="[Complaints] ADD remark";function s(e){var t=r.a.get("/api/complaints/getcomplaint/".concat(e));return function(e){return t.then(function(t){return e({type:i,payload:t.data.complain})})}}function u(e){var t=new FormData;for(var a in e)t.append(a,e[a]);t.append("attachment",e.attachment);var n=fetch("/api/complaints/addcomplaint",{method:"POST",body:t,credentials:"include"});return function(e){return n.then(function(t){return e(Object(c.B)({message:"complaint Saved"})),e({type:o,payload:t.data})})}}function d(e,t){var a=fetch("/api/complaints/addRemark",{crossDomain:!0,method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({complain_id:e,remark:t})});return function(e){return a.then(function(t){return e(Object(c.B)({message:"Remark updated"})),e({type:l,payload:t.data})})}}function m(){return{type:i,payload:{description:"",active:!0}}}var p=a(104),f=a.n(p),b=a(164),h="[COMPLAINTS] GET ORDERS",g="[COMPLAINTS] SET COMPLAINTS SEARCH TEXT";function v(e){var t=fetch("api/complaints/getcomplaints/",{crossDomain:!0,method:"GET",credentials:"include"});return function(e){return t.then(function(){var t=Object(b.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:return n=t.sent,e(Object(c.B)({message:n.message})),t.abrupt("return",e({type:h,payload:n.complaints}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}function j(e){return{type:g,searchText:e.target.value}}a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"h",function(){return s}),a.d(t,"j",function(){return u}),a.d(t,"f",function(){return d}),a.d(t,"i",function(){return m}),a.d(t,"b",function(){return h}),a.d(t,"e",function(){return g}),a.d(t,"g",function(){return v}),a.d(t,"k",function(){return j})},861:function(e,t,a){"use strict";var n=a(49),r=a(7),c=a(837),i={data:null},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.c:case c.d:case c.a:return Object(r.a)({},e,{data:t.payload});default:return e}},l={data:[],searchText:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.b:return Object(r.a)({},e,{data:t.payload});case c.e:return Object(r.a)({},e,{searchText:t.searchText});default:return e}},u=Object(n.d)({complaint:o,complaints:s});t.a=u},984:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),i=a(291),o=a(804),l=a(119),s=a(146),u=a(757),d=a(808),m=a(837),p=a(5);var f=function(e){var t=Object(p.b)(),a=Object(p.c)(function(e){return e.complaints.complaints.searchText}),n=Object(p.c)(function(e){return e.fuse.settings.mainTheme});return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.b,{animation:"transition.expandIn",delay:300},r.a.createElement(o.a,{className:"text-32 mr-0 sm:mr-12"},"shopping_basket")),r.a.createElement(c.b,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(l.a,{className:"hidden sm:flex",variant:"h6"},"Complaints"))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-0 pl-12 sm:px-12"},r.a.createElement(d.a,{theme:n},r.a.createElement(c.b,{animation:"transition.slideDownIn",delay:300},r.a.createElement(s.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},r.a.createElement(o.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(u.a,{placeholder:"Search",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t(m.k(e))}}))))))},b=a(14),h=a(969),g=a(970),v=a(967),j=a(968),E=a(987),O=a(70),y=a(9),w=a(966),x=a(820),S=a(986),P=(a(3),a(829)),T=[{id:"item",align:"left",disablePadding:!1,label:"Item",sort:!1},{id:"subject",align:"left",disablePadding:!1,label:"Subject",sort:!1},{id:"date",align:"left",disablePadding:!1,label:"Date",sort:!0},{id:"made_by",align:"left",disablePadding:!1,label:"Made By",sort:!0}],k=Object(P.a)(function(e){return{actionsButtonWrapper:{background:e.palette.background.paper}}});var N=function(e){k(e);var t=Object(n.useState)(null),a=Object(b.a)(t,2);return a[0],a[1],r.a.createElement(w.a,null,r.a.createElement(v.a,{className:"h-64"},T.map(function(t){return r.a.createElement(j.a,{key:t.id,align:t.align,padding:t.disablePadding?"none":"default",sortDirection:e.order.id===t.id&&e.order.direction},t.sort?r.a.createElement(x.a,{title:"Sort",placement:"right"===t.align?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(S.a,{active:e.order.id===t.id,direction:e.order.direction,onClick:(a=t.id,function(t){e.onRequestSort(t,a)})},t.label)):t.label);var a},this)))};var C=Object(O.g)(function(e){var t=Object(p.b)(),a=Object(p.c)(function(e){return e.complaints.complaints.data}),i=Object(p.c)(function(e){return e.complaints.complaints.searchText}),o=Object(n.useState)([]),l=Object(b.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(a),f=Object(b.a)(d,2),O=f[0],w=f[1],x=Object(n.useState)(0),S=Object(b.a)(x,2),P=S[0],T=S[1],k=Object(n.useState)(10),C=Object(b.a)(k,2),D=C[0],I=C[1],B=Object(n.useState)({direction:"asc",id:null}),A=Object(b.a)(B,2),R=A[0],L=A[1];return Object(n.useEffect)(function(){t(m.g())},[t]),Object(n.useEffect)(function(){console.log(a),w(0===i.length?a:c.w.filterArrayByString(a,i))},[a,i]),r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(c.p,{className:"flex-grow overflow-x-auto"},r.a.createElement(h.a,{className:"min-w-xl","aria-labelledby":"tableTitle"},r.a.createElement(N,{numSelected:s.length,order:R,onSelectAllClick:function(e){e.target.checked?u(O.map(function(e){return e.id})):u([])},onRequestSort:function(e,t){var a=t,n="desc";R.id===t&&"desc"===R.direction&&(n="asc"),L({direction:n,id:a})},rowCount:O.length}),r.a.createElement(g.a,null,y.a.orderBy(O,[function(e){switch(R.id){case"subject":return e.subject;case"date":return new Date(e.date);default:return e[R.id]}}],[R.direction]).slice(P*D,P*D+D).map(function(t,a){return r.a.createElement(v.a,{className:"h-64 cursor-pointer",hover:!0,tabIndex:-1,key:t.id,onClick:function(a){return n=t,void e.history.push("/profile/complaints/"+n.id);var n}},r.a.createElement(j.a,{component:"th",scope:"row"},a+1),r.a.createElement(j.a,{component:"th",scope:"row"},t.subject),r.a.createElement(j.a,{className:"truncate",component:"th",scope:"row"},new Date(t.date).toDateString()),r.a.createElement(j.a,{component:"th",scope:"row"},t.made_by))})))),r.a.createElement(E.a,{component:"div",count:O.length,rowsPerPage:D,page:P,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(e,t){T(t)},onChangeRowsPerPage:function(e){I(e.target.value)}}))}),D=a(861);t.default=Object(i.a)("complaints",D.a)(function(){return r.a.createElement(c.n,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:r.a.createElement(f,null),content:r.a.createElement(C,null),innerScroll:!0})})}}]);